# <h1 align=center> **Proyecto Final Grupal de HENRY** </h1>

<p align=center><img src="https://github.com/ramirou2/NY_TaxiGreen/assets/111613206/80d5c1d4-7cdb-40a3-b521-2b5e1b4b2b77" width=400> </p>

# <h1 align=center>**`NY_TaxiGreen: AnÃ¡lisis del movimiento de taxis en la ciudad de Nueva York y su relaciÃ³n con la calidad del aire y la contaminaciÃ³n sonora.`**</h1>

 ðŸ“”: [Reporte TÃ©cnico Completo](https://crichubiava.atlassian.net/l/cp/14Q0CXYV)

### **`Equipo`**</h2>

<p align= left>
<br> <img src="https://avatars.githubusercontent.com/u/111613206?v=4" width=100>
<br> Araque Roldan Mauricio Alejandro
<br> <sub>  https://github.com/araquester
<br> https://www.linkedin.com/in/mauricio-araque </sub>
</p>

<p align= left>
<img src="https://media.licdn.com/dms/image/D4E03AQFDK8a0LZX7Sw/profile-displayphoto-shrink_100_100/0/1689894810692?e=1698883200&v=beta&t=JrdjWkYa1aZ4cpdwUXwafdGS1AvVGMrxBdZ6Nzdaf9w" width=100>
<br> <sub>Biava, Cristian 
<br> https://github.com/Crichu
<br> https://www.linkedin.com/in/cristian-biava/ </sub>
</p>

<p align= left>
<img src="https://avatars.githubusercontent.com/u/79583157?v=4" width=100>
<br> <sub> LÃ³pez Guerra, Adriana Gabriela 
<br> https://github.com/AdrianaGLG
<br> https://www.linkedin.com/in/adriana-gabriela-lopez-guerra </sub>
</p>

<p align= left>
<img src="https://avatars.githubusercontent.com/u/69260155?v=4" width=100>
<br> <sub>Luna Paez, GastÃ³n Ramiro
<br> https://github.com/ramirou2
<br> https://www.linkedin.com/in/gaston-luna-paez/ </sub>
</p>

<p align= left>
<img src="https://media.licdn.com/dms/image/D4E03AQH0E5IuAOAKjQ/profile-displayphoto-shrink_800_800/0/1692194604387?e=1698883200&v=beta&t=3ahkSTiqFkN0p_kJJRXjWvi7GAUMVazlrRERdPc56vw" width=100>
<br> <sub> Rappaport, Fernando Ariel
<br> https://github.com/TheFercho
<br> https://www.linkedin.com/in/fernando-rappaport-thefercho/ </sub>
</p> 


### **`Esquema del Repositorio`**</h3>

```Python
.
â”œâ”€â”€ Complementary  (Datasets complementarios)
|       â””â”€â”€ fuel_consumption_ratings  
|       â””â”€â”€ yellow_taxis
    â”œâ”€â”€ air_quality_data.csv  (Dataset_CM_01)
    â”œâ”€â”€ car_noise.csv  (Dataset_CM_02)
    â”œâ”€â”€ weather.csv  (Dataset_CM_03)
â”œâ”€â”€ Datasets    (Datasets bases)
|       â””â”€â”€ Datasets_Clean  
|            â”œâ”€â”€ Alternative Fuel Vehicles US.csv
|            â”œâ”€â”€ ElectricCarData_Clean.csv
|            â”œâ”€â”€ Electric_and_Alternative_Fuel_Charging_Stations.csv
|            â”œâ”€â”€ Light Duty Vehicles.csv
|            â”œâ”€â”€ Vehicle Fuel Economy Data.csv
|            â”œâ”€â”€ taxi+_zone_lookup.csv
|            â”œâ”€â”€ taxi_zones.csv
    â”œâ”€â”€ Alternative Fuel Vehicles US.csv  (Dataset_01)
    â”œâ”€â”€ Electric and Alternative Fuel Charging Stations.csv  (Dataset_02)
    â”œâ”€â”€ ElectricCarData_Clean.csv  (Dataset_03)
    â”œâ”€â”€ ElectricCarData_Norm.csv  (Dataset_04)
    â”œâ”€â”€ Light Duty Vehicles.csv  (Dataset_05)
    â”œâ”€â”€ Vehicle Fuel Economy Data.csv  (Dataset_06)
    â”œâ”€â”€ data_dictionary_trip_records_yellow.pdf
    â”œâ”€â”€ taxi+_zone_lookup.csv (Dataset_07)
    â”œâ”€â”€ taxi_zones.dbf
â”œâ”€â”€ EDA_Notebooks
    â”œâ”€â”€ EDA_Dataset_01_&_03.ipynb
    â”œâ”€â”€ EDA_Dataset_02.ipynb
    â”œâ”€â”€ EDA_Dataset_06.ipynb
    â”œâ”€â”€ EDA_Dataset_CM_01.ipynb
    â”œâ”€â”€ EDA_Dataset_CM_02_&_03_&_Tripdata_2023_05_parquet.ipynb
    â”œâ”€â”€ EDA_fuel_consumption_ratings.ipynb
â”œâ”€â”€ ETL_Notebooks
|        â””â”€â”€ Normalizacion_Columnas
|           â”œâ”€â”€ normalizacion_Datasets_bases.ipynb
|           â”œâ”€â”€ normalizacion_Datasets_complementarios.ipynb
    â”œâ”€â”€ ETL_Dataset_01_&_03_&_04_&_07.ipynb
    â”œâ”€â”€ ETL_Dataset_02.ipynb
    â”œâ”€â”€ ETL_Dataset_06.ipynb
    â”œâ”€â”€ ETL_Dataset_07.ipynb
    â”œâ”€â”€ ETL_Dataset_CM_01.ipynb
    â”œâ”€â”€ ETL_Dataset_CM_02_&_03.ipynb
    â”œâ”€â”€ ETL_fuel_consumption_ratings.ipynb
â”œ .gitignore
â”œ README.md
â”œ requirements.txt


```

# <h2 align=left> **Informe** </h2>

### **`PropÃ³sito del proyecto`**

â€‹Taxi Green, una empresa de servicios de transporte de pasajeros, que actualmente se encuentra operando en el sector de micros de media y larga distancia, estÃ¡ interesada en invertir en el sector de transporte de pasajeros con automÃ³viles.

Con una visiÃ³n de un futuro menos contaminado y ajustarse a las tendencias de mercado actuales, quieren corroborar la relaciÃ³n entre estos medios de transporte particulares con:

* Calidad del aire

* ContaminaciÃ³n sonora

PropÃ³sito: estudiar la posibilidad de implementar vehÃ­culos elÃ©ctricos a su flota; ya sea en su totalidad o parte de la misma.

Se pretende hacer un anÃ¡lisis preliminar del movimiento de los taxis en la ciudad de Nueva York, para poder obtener un marco de referencia y poder tomar decisiones bien fundamentadas.â€‹

### **`Objetivo general`**

AnÃ¡lisis del movimiento vehicular en NYC y su relaciÃ³n con la contaminaciÃ³n del aire y sonora.

### **`Objetivos especÃ­ficos`**

Comprobar:

RelaciÃ³n entre el mercado automotor y las actividades de transporte en la ciudad de Nueva York con:

    *   La calidad del aire (emisiones de CO2).

    *   La contaminaciÃ³n sonora.

    *   Efecto de las condiciones climÃ¡ticas con la cantidad de viajes solicitados. 

### **`KPIs Propuestos`**

Se proponen los siguientes KPIs con base de mediciÃ³n trimestral:

* Promedio de emisiÃ³n de CO2 de la nueva flota menor a 3

![](<Imagenes/KPI 01.jpg>)

* Ruido promedio por diseÃ±o de la nueva flota 50 dB

![](<Imagenes/KPI 02.jpg>)
  
* VehÃ­culos elÃ©ctricos en la flota > 60%

![](<Imagenes/KPI 03.jpg>)
  
* autonomÃ­a de la nueva flota entre > 300 km

![](<Imagenes/KPI 04.jpg>)
  
* AntigÃ¼edad de la flota < 3 aÃ±os (ningÃºn vehÃ­culo puede tener mÃ¡s de 3 aÃ±os)

![](<Imagenes/KPI 05.jpg>)

### **`Alcance (Desarrollar)`**

> [!IMPORTANT]
> Crucial information necessary for users to succeed.
> Debe tener:
>  * AnÃ¡lisis descriptivo del movimiento de los taxis en NYC (patrones por semana, franja horaria). Si hay datos, incluir tambiÃ©n: micros, uber, vehÃ­culos particulares, tipos de motor (combustible, elÃ©ctrico, hÃ­brido).
>
> * AnÃ¡lisis descriptivo de la relaciÃ³n entre uso de medios de transporte particulares y la calidad del aire segÃºn el Ã¡rea (Â¿QuÃ© medios se utilizan y cuÃ¡l es el nivel de contaminaciÃ³n del aire?).
>
> * AnÃ¡lisis descriptivo de la relaciÃ³n entre uso de medios de transporte particulares y la contaminaciÃ³n sonora (Â¿QuÃ© medios se utilizan y cuÃ¡l es el nivel de contaminaciÃ³n sonora?).
>
> * Modelo predictivo ML: evoluciÃ³n de la calidad del aire en funciÃ³n del uso de los medios de transporte (distintos escenarios considerando distintos tipos de medios de transporte)
>
> * Modelo predictivo ML: modelar la evoluciÃ³n de la contaminaciÃ³n sonora en funciÃ³n del uso de los medios de transporte (distintos escenarios considerando distintos tipos de medios de transporte)
>
> * Aplica para todo: comparar datos de autos a combustiÃ³n, autos elÃ©ctricos, autos hÃ­bridos (la actividad que quiere estudiar la empresa) vs micros (la actividad actual de la empresa)

> [!NOTE]\
> PodrÃ­a tener:
> * Modelo para analizar tarifas variables en base al movimiento de las distintas franjas de dÃ­as y horarios y condiciones climÃ¡ticas.
> * AnÃ¡lisis del retorno de la inversiÃ³n en una flota de autos elÃ©ctricos.

> [!WARNING]\
> Fuera del alcance:
> * AnÃ¡lisis de marketing
> * CalificaciÃ³n de servicios y/o condutores

### **`Matriz de responsabilidades`**

:black_circle: Main

:small_red_triangle:  Support

![Matriz de Responsabilidades](<Imagenes/Matriz de responsabilidades.jpg>)



# <h2 align=left> **Plan de trabajo** </h2>

| Hito | Nombre | Entregables | Esperado | Fecha |
|:---------------:|:---------:|:---------:|:---------:|:---------:|
| Demo Sprint #1 | Data Ingest  Process | Puesta en marcha el proyecto y Trabajando los Datos: <br> * Kickoff del proyecto  <br>* Entendimiento de las necesidades <br>* Documentar alcance , objetivo y entregables <br>* KPIâ€™s <br>* ImplementaciÃ³n de stack propuesto | * MÃ¡s de 4 KPIs <br>* Mencionar las tecnologÃ­as a usar <br>* DocumentaciÃ³n de alcance del proyecto <br>* EDA preliminar, calidad del dato <br>* Repo Github <br>* PlanificaciÃ³n y estimaciÃ³n de esfuerzos (Diagrama de Gantt) | 09/08/2023 |
|Demo Sprint #2 | Data Analytics & ML |Data Engineering:<br> * Arquitectura propuesta y diagrama<br> * Diccionarios de datos <br> * CreaciÃ³n del DW <br> * Automatizar el DW <br> * Carga incremental | * DW con herramientas Big Data (HDFS, Hive, Spark y/o motores No-SQL y/o Servicios Cluod) <br> * DW automatizado con carga inicial <br> * Al menos 2 tablas de hechos y 5 dimensionales  <br> * Carga incremental de datos (video) | 23/08/2023
| Demo Sprint #3 | Data Analytics y ML |Etapa de Analytics y Machine Learning <br> * Dashboard <br> * Reportes <br> * Storytelling <br> * Modelo ML <br> * Ajustes del modelo |* Implementar modelo de ML <br> * Implementar un reporte de visualizaciÃ³n geogrÃ¡fica.|06/09/2023
| |Demo Final |  * Demo general del proyecto <br> * Entregable final<br> * DocumentaciÃ³n| * PresentaciÃ³n dirigida a la direcciÃ³n de la compaÃ±Ã­a. <br> * Retomar lo mostrado en presentaciones anteriores. <br> * Retoques finales en base a recomendaciones de HM y PO. | 06/09/2023 |
***

### <h3 align=left>**`Propuesta de trabajo`** </h3>
***

### RecopilaciÃ³n y limpieza
- [x] Se utilizan los archivos .csv provistos por el cliente. TambiÃ©n se estudian los datasets complementarios facilitados por el cliente, asÃ­ como tambiÃ©n informaciÃ³n extra recopilada por el equipo.
- [x] Los datasets provienen tanto de archivos .csv como de APIs. Estos Ãºltimos son extraÃ­dos con tÃ©cnicas de web scrapping. 
- [x] Los dataset considerados necesarios para el desarrollo del producto final del proyecto, se limpian, ordenan y normalizan.
- [x] AdemÃ¡s, se realiza un anÃ¡lisis exploratorio de datos con el objetivo de detectar insights de interÃ©s para el cliente.

`TecnologÃ­a y librerÃ­as utilizadas: Python, Pandas, Numpy, os`

### CreaciÃ³n de un diccionario y diagrama DER
- [x] Los datasets son procesados y analizados para generar un diccionario de las variables de interÃ©s. 
- [x] Se utiliza esta informaciÃ³n para establecer un diagrama de entidad - relaciÃ³n que facilite su posterior anÃ¡lisis

### DisponibilizaciÃ³n de la informaciÃ³n
- [x] Se crea un DataWarehouse utilizando las herramientas Cloud de Google.

`TecnologÃ­a y librerÃ­as utilizadas: MySQL, Google Cloud`

### AnÃ¡lisis de la informaciÃ³n y Dashboard interactivo
- [x] Se diseÃ±a un dashboard con informaciÃ³n relevante para el negocio teniendo en cuanta los KPIs definidos para tal fin.

`TecnologÃ­a y librerÃ­as utilizadas: Power BI / Streamlit /Locker studio?`

### Modelo de Machine Learning
- [x] Modelo predictivo ML: evoluciÃ³n de la calidad del aire en funciÃ³n del uso de los medios de transporte (distintos escenarios considerando distinta composiciÃ³n de la flota en cuanto a modelos de auto)
- [x] Modelo predictivo ML: modelar la evoluciÃ³n de la contaminaciÃ³n sonora en funciÃ³n del uso de los medios de transporte (distintos escenarios considerando distinta composiciÃ³n de la flota en cuanto a modelos de auto)

`TecnologÃ­a y librerÃ­as utilizadas: Python, Pandas, Numpy, Seaborn, Matplotlib, sklearn`

### App / Web interactiva
- [x] El modelo de machine learnig de disponibiliza a travÃ©s de una pÃ¡gina web, facilitando la interacciÃ³n con el cliente.
- [x] TecnologÃ­a y librerÃ­as utilizadas: Python, FastAPI, Render

### <h3 align=left>**`DefiniciÃ³n de identidad visual de marca`** </h3>

### Desarrollo de un logotipo

El desarrollo de un logotipo implica la creaciÃ³n de un sÃ­mbolo visual o un diseÃ±o grÃ¡fico que representa la esencia de la marca. El logotipo puede consistir en una combinaciÃ³n de elementos como formas, letras, imÃ¡genes o iconos que juntos comunican la identidad y los valores de la empresa. 

Para nuestro proyecto, desarrollamos el logotipo de la empresa consultora (Taxi Green) y el de nuestro grupo de trabajo (LBD) a travÃ©s de la evaluaciÃ³n de las alternativas que ofrecÃ­an plataformas de diseÃ±o tales como:

- Tailor Brands | Small Business Set-up Made Easy 
- Logo Maker | Used By 2.3 Million Startups  
- DiseÃ±a un Logo con Nuestro Creador de Logo Gratis | FreeLogoServices  
- Crear Logos Gratis - Creador de logos - Free Logo Design

### Opciones de logo
| <img src="Imagenes/Opcion Logo 01.jpg" width=200> | <img src="Imagenes/Opcion Logo 02.jpg" width=200> | <img src="Imagenes/Opcion Logo 03.jpg" width=200> | <img src="Imagenes/Opcion Logo 04.jpg" width=200> | <img src="Imagenes/Opcion Logo 05.jpg" width=200> |
|:---------------:|:---------:|:---------:|:---------:|:---------:| 
| <img src="Imagenes/Opcion Logo 06.jpg" width=200> | <img src="Imagenes/Opcion Logo 07.jpg" width=200> | <img src="Imagenes/Opcion Logo 08.jpg" width=200> | <img src="Imagenes/Opcion Logo 09.jpg" width=200> | <img src="Imagenes/Opcion Logo 10.jpg" width=200> |

### Grupalmente se definiÃ³ el diseÃ±o final del grupo de trabajo:

<p align= Center>Logo Final Empresa <br>
<img src="Imagenes/Logo Final.jpg" width=450> </p>

<p align= Center>Logo Corporativo <br>
<img src="Imagenes/Logo Corporativo.jpg" width=200> </p>




## Data Engineering :wrench: 

### IntroducciÃ³n a los Servicios en la Nube: una perspectiva clarificadora
Los "cloud services" o servicios en la nube representan una innovadora modalidad de recursos informÃ¡ticos y aplicaciones, dispuestos a travÃ©s de la red global de internet. En contraposiciÃ³n a la tradicional albergada en servidores locales o en infraestructuras fÃ­sicas, estos servicios operan en entornos de servidores remotos, que pueden abarcar mÃºltiples localizaciones geogrÃ¡ficas. En esta dinÃ¡mica, los proveedores de servicios en la nube brindan a los usuarios una variada gama de capacidades, que incluyen capacidad de almacenamiento, potencia de procesamiento, bases de datos, programas y herramientas, todo accesible bajo demanda.

Los servicios en la nube se pueden dividir en tres categorÃ­as fundamentales:

1. Software as a Service (SaaS): Bajo este modelo, los usuarios acceden a aplicaciones y software directamente a travÃ©s de internet. La instalaciÃ³n y mantenimiento de software en dispositivos propios se torna innecesaria, ya que el procesamiento y almacenamiento se ejecutan en la nube. Ejemplos de SaaS engloban servicios como correo electrÃ³nico en lÃ­nea, suites de productividad y programas de gestiÃ³n empresarial.

2. Platform as a Service (PaaS): En esta categorÃ­a, los proveedores facilitan plataformas y herramientas para que desarrolladores puedan crear, desplegar y administrar aplicaciones en la nube. Los desarrolladores se focalizan en la creaciÃ³n de aplicaciones sin la carga de preocuparse por la infraestructura subyacente. Entornos de desarrollo web y bases de datos en la nube son ejemplos tangibles de PaaS.

3. Infrastructure as a Service (IaaS): En este modelo, se proveen recursos de infraestructura virtualizados, incluyendo servidores, almacenamiento y redes, a travÃ©s de internet. Los usuarios conservan mayor control sobre la configuraciÃ³n y manejo de estos recursos, similar a la gestiÃ³n de servidores fÃ­sicos, pero sin la necesidad de contar con hardware fÃ­sico. IaaS abarca mÃ¡quinas virtuales y servicios de almacenamiento en la nube, entre otros.

 

### ExploraciÃ³n de plataformas

En las primeras etapas, se tomÃ³ la decisiÃ³n de analizar detenidamente tres plataformas diferentes para la implementaciÃ³n de nuestro Data Warehouse (DW), considerando sus caracterÃ­sticas y ventajas en consonancia con nuestros objetivos.

 
<p align= left>
<img src="Imagenes/Plataforma_01.jpg" width=100> Planet Scale: Introducida como una base de datos 'serverless', Planet Scale se integra armÃ³nicamente con MySQL, ofreciendo no solo escalabilidad y rendimiento, sino tambiÃ©n un alto nivel de confiabilidad. Esta plataforma no compromete la experiencia del desarrollador. Al adoptar Planet Scale, accedemos a capacidades de fragmentaciÃ³n horizontal, cambios de esquema sin bloqueos y potentes funciones de base de datos, sin incurrir en las dificultades de su implementaciÃ³n. </p>

[Enlace a Planet Scale](https://planetscale.com/)

<p align= left>
<img src="Imagenes/Plataforma_02.jpg" width=100> Render: Render se distingue por su asombrosa facilidad de uso y su sorprendente capacidad de empoderamiento, generando un entorno altamente escalable. Desde la administraciÃ³n de una simple pÃ¡gina HTML hasta la gestiÃ³n de aplicaciones complejas con mÃºltiples microservicios, Render presenta una soluciÃ³n integral y versÃ¡til.</p>

[Enlace a Render](https://render.com/)

<p align= left>
<img src="Imagenes/Plataforma_03.jpg" width=100> Google Cloud Platform (GCP): GCP emerge como una suite integral de servicios en la nube, diseÃ±ada y proporcionada por Google. Esta plataforma abarca desde servicios de infraestructura hasta soluciones de nivel superior. Dentro de este amplio abanico, Platform as a Service (PaaS) ocupa una posiciÃ³n destacada. La selecciÃ³n de GCP para nuestro proyecto se fundamenta en su capacidad para unificar diversas herramientas bajo un mismo paraguas, evitando la incompatibilidad de software, hardware y otros componentes. Esta cohesiÃ³n contribuye significativamente a la eficiencia y coherencia en la operaciÃ³n del DW.</p>

[Enlace a Google Cloud Platform](https://cloud.google.com/)

### Uso de Servicios Cloud (GCP)

Los servicios en la nube ofrecen una soluciÃ³n escalable y flexible para alojar aplicaciones, almacenar y gestionar datos, y realizar anÃ¡lisis en tiempo real. 

En este proyecto hemos utilizado un servicio PaaS, Google Cloud Platform (GCP), una suite completa de servicios en la nube proporcionados por Google.

La elecciÃ³n final se respalda en su conjunto de servicios en la nube que engloban desde computaciÃ³n y almacenamiento hasta anÃ¡lisis y aprendizaje automÃ¡tico. Al aprovechar las tecnologÃ­as que GCP pone a nuestra disposiciÃ³n, evitamos la complejidad de sincronizar mÃºltiples herramientas de distintos proveedores. En muchos casos, estas incompatibilidades pueden traducirse en barreras software-hardware que obstaculizan la eficiencia y la cohesiÃ³n. Entre las herramientas de GCP que serÃ¡n de utilidad en nuestro proyecto, destacamos:

#### Almacenamiento y bases de datos:

- Cloud Storage: Proporciona un almacenamiento en la nube escalable y duradero para objetos y archivos.
- Cloud SQL: Ofrece una base de datos SQL administrada.

#### AnÃ¡lisis y Big Data:

- BigQuery: Brinda un almacÃ©n de datos y anÃ¡lisis en tiempo real a gran escala.
- Dataflow: Facilita el procesamiento de datos en tiempo real y por lotes.
- Dataproc: Proporciona un servicio administrado de Apache Spark y Hadoop.

#### Analytics y Machine Learning:

- Diversas herramientas para anÃ¡lisis y aprendizaje automÃ¡tico, tales como Tensor Flow, AI Platform, entre otros.

#### Servicios de identidad y seguridad:

- Identity and Access Management (IAM): Ofrece control de acceso y gestiÃ³n de identidades.

#### Otros servicios:

- Cloud Functions: Posibilita la ejecuciÃ³n de cÃ³digo en respuesta a eventos.
- Cloud Vision, Translation, Speech, Natural Language, Video AI: Proporciona servicios de inteligencia artificial para anÃ¡lisis de imÃ¡genes, traducciÃ³n, reconocimiento de voz, procesamiento de lenguaje natural y anÃ¡lisis de video.

La elecciÃ³n estratÃ©gica de GCP como plataforma principal subraya nuestro compromiso con la eficiencia, la coherencia y la compatibilidad en el diseÃ±o y operaciÃ³n de nuestro Data Warehouse.

## Arquitectura:

<p align= left>
<img src="Imagenes/Arquitectura.jpg" width=600></p>
 
## Data Warehouse.
CreaciÃ³n del Data Warehouse 
<p align= left>
<img src="Imagenes/datawarehouse.jpg" width=600></p>
 
<p align= left>
<img src="Imagenes/carga_inicial.jpg" width=600></p>
 

## Carga incremental

La automatizaciÃ³n del Data Warehouse se logrÃ³ mediante la programaciÃ³n de procesos ETL (ExtracciÃ³n, TransformaciÃ³n y Carga) utilizando Google Composer. Esto permitiÃ³ la recopilaciÃ³n periÃ³dica de datos desde las fuentes mencionadas anteriormente, su limpieza, transformaciÃ³n y carga en las tablas correspondientes.

Para garantizar la eficiencia en la carga de datos, implementamos un enfoque de carga incremental. Solo se cargaron los datos nuevos o modificados desde la Ãºltima ejecuciÃ³n del proceso ETL, lo que redujo el tiempo de procesamiento y asegurÃ³ la consistencia de los datos.

:movie_camera:[![Video Carga Incremental Google Cloud](https://img.youtube.com/vi/kh66sdnBeBg/mqdefault.jpg)](https://youtu.be/kh66sdnBeBg?si=-Qd40kqjLXDA4ALa):movie_camera:
 

## Diagrama de Entidad - RelaciÃ³n (DER)
En nuestro Data Warehouse, se crearon dos tablas de hecho y cinco tablas de dimensiones. Las tablas de hecho contienen medidas cuantitativas de interÃ©s, mientras que las tablas de dimensiones almacenan atributos descriptivos que permiten contextualizar y analizar las medidas.

<p align= left>
<img src="Imagenes/DER_Final.jpg" width=600></p>
 


### AnalÃ­tica de datos.

## Contexto
SegÃºn el artÃ­uclo publicado siempre auto (link en Fuente), la ciudad de Nueva York ha anunciado que requerirÃ¡ que las flotas de vehÃ­culos compartidos sean totalmente elÃ©ctricos para 2030.

Este es el plan de implementaciÃ³n de la iniciativa Green Rides: 

- A partir de 2024, Nueva York requerirÃ¡ que el 5 % de todos los viajes de alquile se envÃ­en a vehÃ­culos elÃ©ctricos 
- En 2025 aumentarÃ¡ al 15%.
- En 2026 al 25%. 
- En 2027 al 45%.
- En 2028 al 65%.
- En 2029 al 85%.
- Y, finalmente, en 2030 aumentarÃ¡ al 100%.

[Uber y Lyft](https://siempreauto.com/uber-y-lyft-deberan-ser-100-electricas-en-nueva-york-para-2030/), que en conjunto conforman 78,000 vehÃ­culos de viaje compartido en la ciudad de Nueva York, tambiÃ©n se comprometieron a hacer la transiciÃ³n a los vehÃ­culos elÃ©ctricos para 2030.

> EDA Detalle
> Fuente:
>
> [Nueva York, la primera ciudad del mundo en exigir vehÃ­culos elÃ©ctricos compartidos para 2030 - Siempre Auto 
](https://siempreauto.com/nueva-york-la-primera-ciudad-del-mundo-en-exigir-vehiculos-electricos-compartidos-para-2030/)
En cuanto a los taxis, tambiÃ©n tendrÃ¡n que apegarse a esta normativa.

Actualmente, en la ciudad de Nueva York hay aproximadamente 13.000 taxis, en donde se estima que el 80% son vehÃ­culos hÃ­bridos Nissan NV200.

## SituaciÃ³n actual de la empresa Taxi Green.
La empresa Taxi Green no cuenta actualmente con una flota de autos de uso compartido o taxi.

A los fines de estimar la evoluciÃ³n de los indicadores principales del negocio, se evalÃºan los viajes realizados en la ciudad de Nueva York por la flota existente de vehÃ­culos. Con este objetivo, se desarrolla un tablero de control. 

Finalmente, se desarrolla un modelo de machine learning con la finalidad de proponer las mejores alternativas de flotas compuestas por distintos modelos de vehÃ­culos, optimizando los KPIs.

## Dashboard

### TecnologÃ­as utilizadas

El desarrollo del panel de control se materializÃ³ a travÃ©s de Looker, una aplicaciÃ³n de visualizaciÃ³n integrada al entorno de Google Cloud Platform.

#### 1- Flota Propuesta

El objetivo de esta pantalla es evaluar la flota de vehÃ­culos en vistas a los indicadores clave del negocio.

A modo de ejemplo, utilizamos una de las combinaciones propuestas por el modelo de optimizaciÃ³n de parÃ¡metros que se explica mÃ¡s adelante. La idea es que, una vez que el negocio estÃ© en marcha, estos datos se reemplacen por los reales.

<p align= center>
<img src="Imagenes/Flota Propuesta.jpg" width=600></p>

En la parte superior, se puede observar el detalle de cada vehÃ­culo.

En el ejemplo, la flota se compone de 300 vehÃ­culos, de los cuales 240 son elÃ©ctricos Kia Niro y 60 son hÃ­bridos distribuidos entre Hyundai Sonata y Chevrolet Malibu y suponen una inversiÃ³n de 11 millones de dÃ³lares.

Abajo se evalÃºan los KPIs:

Emisiones de CO2.

HabÃ­amos planteado que en promedio la emisiÃ³n por diseÃ±o sea menor a 20 g/km. El promedio estÃ¡ un poco por encima del target, asÃ­ lo indica la etiqueta roja. 

ComposiciÃ³n de la flota

En el siguiente grÃ¡fico se visualiza que el 80% de lo vehÃ­culos tienen motor hÃ­brido, cuando nuestro objetivo era lograr un mÃ­nimo de 60%. Se cumple el objetivo, por eso la etiqueta verde.

Por otro lado, es interesante remarcar que el gobierno de Nueva York ya puso en marcha un plan para migrar el 100% de la flota de taxis y autos compartidos a elÃ©ctricos para el 2030. Con esto ya estarÃ­a muy cerca de cumplirse, adicionando que seguramente tambiÃ©n haya, en un futuro incentivos para comprar autos elÃ©ctricos y premios para la empresas que cumplan los objetivos.

Ruido

AutonomÃ­a

De la misma forma se evalÃºa el ruido promedio y la autonomÃ­a de los vehÃ­culos. 

En este Ãºltimo caso,  proponemos el target de 300 km porque un taxi recorre, en promedio, 290 km por dÃ­a. Por lo cual, de esta forma, el chofer podrÃ­a cumplir toda su jornada laboral con un solo tanque.

#### 2- Emisiones de CO2

<p align= center>
<img src="Imagenes/Emisiones de CO2.jpg" width=600></p>

Podemos encontrar:

â€¢Un filtro que permite seleccionar mes-aÃ±o para ver datos particulares de algÃºn perÃ­odo de interÃ©s.
â€¢La cantidad de viajes realizados,
â€¢Las emisiones totales y
â€¢Las emisiones en g / km promedio durante el perÃ­odo seleccionado

En el grÃ¡fico de columnas se puede ver cÃ³mo evolucionan las emisiones de CO2/km mes a mes.

En promedio, las emisiones de CO2 /km estÃ¡n muy arriba de target que hemos propuesto. Por ende, el objetivo de 20 g/km es muy desafiante. Remarcamos aquÃ­ que los casi 29,8 g/km, si bien no cumple con el objetivo propuesto, es una mejora considerable de la situaciÃ³n actual.

#### 3 - AnÃ¡lisis econÃ³mico

Esta imagen tiene como misiÃ³n presentar informaciÃ³n para el anÃ¡lisis de aspecto econÃ³mico del negocio que, si bien no fue planteado como KPI en el inicio, siempre es una variable importante a la hora de definir la concreciÃ³n o no de un proyecto.

<p align= center>
<img src="Imagenes/Analisis Economico.jpg" width=600></p>

En esta imagen podemos ver:

â€¢La cantidad de viajes realizados
â€¢Los ingresos totales
â€¢Y el promedio de los ingresos por viaje

Abajo, en el grÃ¡fico combinado, las columnas representan la facturaciÃ³n mensual y la lÃ­nea verde la facturaciÃ³n acumulada.

La lÃ­nea horizontal blanca representa la inversiÃ³n inicial de 11 millones que mencionÃ© al principio y el objetivo de su presencia es visualizar cuÃ¡ndo se recupera la inversiÃ³n. En este caso, tardarÃ­a 8 meses.

AcÃ¡ es necesario hacer una aclaraciÃ³n. Estos datos son de la base de datos general de taxis, por ende, no podemos pretender hacer estos cÃ¡lculos con el 100% de los datos ya que esto implicarÃ­a tener una cuota de mercado del 100%, un monopolio.

Para resolver esta cuestiÃ³n, se agregÃ³ una mÃ©trica que tiene como objetivo evaluar distintos escenarios dependiendo de la penetraciÃ³n de mercado objetivo y esto sirve para poder predecir la facturaciÃ³n y el retorno de la inversiÃ³n en cada uno de los mismo. En la imagen, se muestra un excenario con el 1% de participaciÃ³n de mercado.

Por otra parte, a la derecha hay un mapa de calor que permite visualizar en quÃ© zonas inician los viajes mÃ¡s rentables.

### Modelos de machine learning

:link:[Click Aqui para acceder al modelo](https://taxigreenmodels-pf.streamlit.app/):link:

#### Modelo 1: Modelo ML - Clima DescripciÃ³n General

En este modelo se empleo Machine Learning, puntualmente un modelo de Random Forest, el cual fue entrenado con datos de los viajes de los Yellow Taxis en Manhattan - New York asociado a los datos climÃ¡ticos correspondientes al momento del viaje.

- Variables climÃ¡ticas: Temperatura, Nieve, Lluvia
- Variables temporales: Hora, DÃ­a de la semana.
- Variables de viajes: Cantidad de viajes por hora, Total de km recorridos, Total de dinero recaudado

**Stack tecnolÃ³gico:**

> Python: Pandas, Numpy, Matplotlib, Seaborn, Scikit Learn, Request, Os.

**Uso**

Se ingresa DÃ­a de la semana, Hora, Temperatura, Lluvia y Nieve.

El modelo devuelve: 

- Cantidad de viajes
- Cantidad de taxis necesarios
- Km recorridos
- Ingresos potenciales

<p align= center>
<img src="Imagenes/Modelo_01_ML.jpg" width=400></p>

__Modelo 2: Modelo OptimizaciÃ³n de flota__

En tÃ©rminos de las condiciones propuestas, 60% de flota elÃ©ctrica, minimizaciÃ³n de emisiones y minimizaciÃ³n de ruidos. Se realizÃ³ un modelo de optimizaciÃ³n empleando metodologÃ­as lineales, que si bien parecen simplificado tienen un muy buen desempeÃ±o y a gran velocidad sin necesidad de recurrir a metodologÃ­as mÃ¡s complejas.

Entrada: Datos de autos autorizados para desempeÃ±o de viajes, Cantidad de autos necesarios, Dinero inicial

Salida: Flota optimizada en tÃ©rminos de la entrada y las restricciones asociadas al proyecto.

__Stack tecnolÃ³gico:__

> Python: Os, Pulp, Pandas, Numpy

__Uso:__

Se ingresa: 

InversiÃ³n estimada

Cantidad de autos desaeados en la flota

El modelo devuelve:

Un listado de vehÃ­culos recomendados.

<p align= center>
<img src="Imagenes/Modelo_02_ML.jpg" width=400></p>

Este modelo tambiÃ©n tiene la posibilidad de simular  el consumo de combustible, y el CO2 emitido en 1 aÃ±o, comparando la flota propuesta vs un flota promedio.

<p align= center>
<img src="Imagenes/Modelo_03_ML.jpg" width=400></p>

####  Despliegue de los modelos
En tÃ©rminos de conseguir un despliegue de bajo o nulo costo, luego de analizar diversas alternativas, se seleccionÃ³ Streamlit Cloud.

Por ende, se utilizÃ³ su framework asociado para desarrollar un despliegue MVP: Producto Viable MÃ­nimo.

__Stack tecnolÃ³gico:__

> Python: Streamlit, Pandas, Numpy, Request, Seaborn, Matplotlib

>Despliegue: Streamlit Cloud

### Conclusiones

- Generar una flota amigable con el ambiente.
- Uso de los sistemas de IA para el desarrollo de algoritmos de ML que permitirÃ¡n ajustar los diversos parÃ¡metros en tiempo real para optimizar los ingresos
  tanto de la empresa como de los conductores.
- CapacitaciÃ³n al personal en las herramientas desarrolladas para el uso eficiente del producto ofrecido.
- AcompaÃ±amiento durante todo el proceso de incorporaciÃ³n y adaptaciÃ³n de las nuevas tecnologÃ­as para lograr el retorno efectivo de la inversiÃ³n inicial.
- ObtenciÃ³n de una herramienta que basada en los modelos de Machine Learning le permitirÃ¡ predecir los resultados optimos para gestionar la flota que se decida
  obtener.
